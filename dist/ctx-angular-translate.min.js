!function(){"use strict";var a=angular.module("pascalprecht.translate",["ng"]);a.value("ngTranslateConfig",{languageLabels:{en_US:"English (United States)",en_GB:"English (Great Britain)",es_ES:"Español (España)",fr_FR:"Français",pt_PT:"Português"}}),a.constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),a.factory("$translateDefaultInterpolation",["$interpolate",function(a){var b,c={},d="default",e=null,f={escaped:function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=angular.element("<div></div>").text(a[c]).html());return b}},g=function(a){var b;return b=angular.isFunction(f[e])?f[e](a):a};return c.setLocale=function(a){b=a},c.getInterpolationIdentifier=function(){return d},c.useSanitizeValueStrategy=function(a){return e=a,this},c.interpolate=function(b,c){return e&&(c=g(c)),a(b)(c)},c}]),a.provider("$translate",["$STORAGE_KEY",function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n={},o=[],p=a,q=[],r=!1,s="translate-cloak",t=!1,u=/@\:\((.*?)?\)/g,v=".",w=function(){var a=window.navigator;return(a.language||a.browserLanguage||a.systemLanguage||a.userLanguage||"").split("-").join("_")},x=function(a){for(var b=[],d=angular.lowercase(a),e=0,f=o.length;f>e;e++)b.push(angular.lowercase(o[e]));if(b.indexOf(d)>-1)return d;if(c&&c[a]){var g=c[a];if(b.indexOf(angular.lowercase(g))>-1)return g}var h=a.split("_");return h.length>1&&b.indexOf(angular.lowercase(h[0]))>1?h[0]:void 0},y=function(a,b){if(!a&&!b)return n;if(a&&!b){if(angular.isString(a))return n[a]}else angular.isObject(n[a])||(n[a]={}),angular.extend(n[a],z(b));return this};this.translations=y,this.cloakClassName=function(a){return a?(s=a,this):s};var z=function(a,b,c,d){var e,f,g,h;b||(b=[]),c||(c={});for(e in a)a.hasOwnProperty(e)&&(h=a[e],angular.isObject(h)?z(h,b.concat(e),c,e):(f=b.length?""+b.join(v)+v+e:e,b.length&&e===d&&(g=""+b.join(v),c[g]="@:"+f),c[f]=h));return c};this.addInterpolation=function(a){return q.push(a),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){return i=a,this},this.useSanitizeValueStrategy=function(a){return r=a,this},this.preferredLanguage=function(a){return a?(b=a,this):b},this.translationNotFoundIndicator=function(a){return this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a),this},this.translationNotFoundIndicatorLeft=function(a){return a?(l=a,this):l},this.translationNotFoundIndicatorRight=function(a){return a?(m=a,this):m},this.use=function(a){if(a){if(!n[a]&&!j)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");return d=a,this}return d};var A=function(a){return a?void(p=a):g?g+p:p};this.storageKey=A,this.useUrlLoader=function(a){return this.useLoader("$translateUrlLoader",{url:a})},this.useStaticFilesLoader=function(a){return this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){return j=a,k=b||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(a){return f=a,this},this.storagePrefix=function(a){return a?(g=a,this):a},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){return h=a,this},this.usePostCompiling=function(a){return t=!!a,this},this.determinePreferredLanguage=function(a){var c=a&&angular.isFunction(a)?a():w();return o.length?void(b=x(c)):(b=c,this)},this.registerAvailableLanguageKeys=function(a,b){return a?(o=a,b&&(c=b),this):o},this.linkKeyRegExp=function(a){return a?(u=a,this):u},this.$get=["$log","$injector","$rootScope","$q",function(a,c,g,l){var m,o=c.get(i||"$translateDefaultInterpolation"),v=!1,w={},x={},B=function(a,c,e){var g=l.defer();a=a.trim();var h=function(){var a=b?x[b]:x[d];if(f&&!a){var c=m.get(p);a=x[c]}return a}();return h?h.then(function(){F(a,c,e).then(g.resolve,g.reject)}):F(a,c,e).then(g.resolve,g.reject),g.promise},C=function(a){d=a,g.$emit("$translateChangeSuccess"),f&&m.set(B.storageKey(),d),o.setLocale(d),angular.forEach(w,function(a,b){w[b].setLocale(d)}),g.$emit("$translateChangeEnd")},D=function(a){if(!a)throw"No language key specified for loading.";var b=l.defer();return g.$emit("$translateLoadingStart"),v=!0,c.get(j)(angular.extend(k,{key:a})).then(function(c){var d={};g.$emit("$translateLoadingSuccess"),angular.isArray(c)?angular.forEach(c,function(a){angular.extend(d,z(a))}):angular.extend(d,z(c)),v=!1,b.resolve({key:a,table:d}),g.$emit("$translateLoadingEnd")},function(a){g.$emit("$translateLoadingError"),b.reject(a),g.$emit("$translateLoadingEnd")}),b.promise};if(f&&(m=c.get(f),!m.get||!m.set))throw new Error("Couldn't use storage '"+f+"', missing get() or set() method!");angular.isFunction(o.useSanitizeValueStrategy)&&o.useSanitizeValueStrategy(r),q.length&&angular.forEach(q,function(a){var e=c.get(a);e.setLocale(b||d),angular.isFunction(e.useSanitizeValueStrategy)&&e.useSanitizeValueStrategy(r),w[e.getInterpolationIdentifier()]=e});var E=function(a,b){var c=b.hasOwnProperty(a)?b[a]:void 0;if(void 0!==c)return c.match(u)&&c.match(u).length>0?c.replace(u,function(a,c){return E(c,b)}):c;throw new Error("translation error : "+a+" key not found error")},F=function(a,b,c){var e=l.defer(),f=d?n[d]:n,g=c?w[c]:o;try{e.resolve(g.interpolate(E(a,f),b))}catch(h){e.reject(h)}return e.promise},G=function(a,b,c){var e,f=d?n[d]:n,g=c?w[c]:o;try{e=g.interpolate(E(a,f),b)}catch(h){console.error(h)}return e};return B.preferredLanguage=function(){return b},B.cloakClassName=function(){return s},B.proposedLanguage=function(){return e},B.storage=function(){return m},B.use=function(a){if(!a)return d;var b=l.defer();return g.$emit("$translateChangeStart"),!n[a]&&j?(e=a,x[a]=D(a).then(function(a){e=void 0,y(a.key,a.table),b.resolve(a.key),C(a.key)},function(a){e=void 0,g.$emit("$translateChangeError"),b.reject(a),g.$emit("$translateChangeEnd")})):(b.resolve(a),C(a)),b.promise},B.storageKey=function(){return A()},B.isPostCompilingEnabled=function(){return t},B.refresh=function(a){function b(){e.resolve(),g.$emit("$translateRefreshEnd")}function c(){e.reject(),g.$emit("$translateRefreshEnd")}if(!j)throw new Error("Couldn't refresh translation table, no loader registered!");var e=l.defer();if(g.$emit("$translateRefreshStart"),a)n[a]?D(a).then(function(c){y(c.key,c.table),a===d&&C(d),b()},c):c();else{var f=[];d&&f.push(D(d)),l.all(f).then(function(a){angular.forEach(a,function(a){n[a.key]&&delete n[a.key],y(a.key,a.table)}),b()})}return e.promise},B.instant=function(a,e,f){if("undefined"==typeof a||""===a)return a;a=a.trim();var g,i=[];b&&i.push(b),d&&i.push(d);for(var j=0,k=i.length;k>j;j++){var l=i[j];if(n[l]&&n[l][a]&&(g=G(a,e,f)),"undefined"!=typeof g)break}return g||(g=void 0,h&&!v&&c.get(h)(a,d)),g},j&&angular.equals(n,{})&&B.use(B.use()),B}]}]),a.factory("$translateStaticFilesLoader",["$q","$http",function(a,b){return function(c){if(!c||!angular.isString(c.prefix)||!angular.isString(c.suffix))throw new Error("Couldn't load static files, no prefix or suffix specified!");var d=a.defer();return b({url:[c.prefix,c.key,c.suffix].join(""),method:"GET",params:""}).success(function(a){d.resolve(a)}).error(function(){d.reject(c.key)}),d.promise}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(a,b){return function(c,d,e){return angular.isObject(d)||(d=a(d)()),b.instant(c,d,e)}}]),a.directive("translate",["$translate","$q","$interpolate","$compile","$parse","$rootScope",function(a,b,c,d,e,f){return{restrict:"AE",scope:!0,link:function(b,g,h){var i=h.translateValues?h.translateValues:void 0,j=h.translateInterpolation?h.translateInterpolation:void 0,k=g[0].outerHTML.match(/translate-value-+/i),l=g.attr("data-prefix")?g.attr("data-prefix"):void 0,m=g.attr("data-suffix")?g.attr("data-suffix"):void 0,n=g.html();if(b.fallbackValue=n,b.interpolateParams={},h.$observe("translate",function(a){angular.equals(a,"")||!angular.isDefined(a)?b.translationId=c(g.text().replace(/^\s+|\s+$/g,""))(b.$parent):b.translationId!==a&&(b.translationId=a,r())}),i&&h.$observe("translateValues",function(a){a&&b.$parent.$watch(function(){angular.extend(b.interpolateParams,e(a)(b.$parent))})}),k){var o=function(a){h.$observe(a,function(c){b.interpolateParams[angular.lowercase(a.substr(14))]=c})};for(var p in h)h.hasOwnProperty(p)&&"translateValue"===p.substr(0,14)&&"translateValues"!==p&&o(p)}var q=function(b,c){var e=(a.isPostCompilingEnabled(),"undefined"!=typeof h.translateCompile),f=e&&"false"!==h.translateCompile;b=l?l+b:b,b=m?b+m:b,g.html(b),(!e||f)&&d(g.contents())(c)},r=function(){return i||k?function(){b.$watch("interpolateParams",function(c){b.translationId&&c&&a(b.translationId,c,j).then(function(a){q(a,b)},function(a){q(b.fallbackValue,b),b.$emit("Translation Error",a)})},!0)}:function(){var c=b.$watch("translationId",function(d){b.translationId&&d&&a(d,{},j).then(function(a){q(a,b),c()},function(a){q(b.fallbackValue,b),b.$emit("Translation Error",a),c()})},!0)}}(),s=f.$on("$translateChangeSuccess",r);r(),b.$on("$destroy",s)}}}]),a.directive("localeSelector",["$translate","ngTranslateConfig",function(a,b){var c=function(b){a.use(b)},d=function(a){a.config=b,a.changeLocale=c};return{restrict:"AE",templateUrl:"templates/localeSelector.tpl.html",transclude:!0,replace:!0,scope:{languages:"=",selectorLabel:"@",selectorLabelL10n:"@",translate:"@"},priority:1,link:d}}]),a.directive("translateCloak",["$rootScope","$translate",function(a,b){return{compile:function(c){a.$on("$translateLoadingSuccess",function(){c.removeClass(b.cloakClassName())}),c.addClass(b.cloakClassName())}}}]),a.run(["$translate",function(a){var b=a.storageKey(),c=a.storage();c?c.get(b)?a.use(c.get(b)):angular.isString(a.preferredLanguage())?a.use(a.preferredLanguage()):c.set(b,a.use()):angular.isString(a.preferredLanguage())&&a.use(a.preferredLanguage())}]),a.run(["$templateCache",function(a){a.put("templates/localeSelector.tpl.html",'<div class="localeSelector btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span ng-transclude=""></span> <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li data-ng-repeat="locale in languages"><a href="#" class="locale-{{ locale }}" data-translate="{{ \'localeSelector.\' + locale }}" ng-click="changeLocale(locale)">{{ config.languageLabels[locale] || locale }}</a></li></ul></div>')}])}();